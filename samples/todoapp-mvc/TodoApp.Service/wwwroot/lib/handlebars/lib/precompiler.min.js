/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/handlebars@4.7.8/lib/precompiler.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Async from"neo-async";import fs from"fs";import*as Handlebars from"./handlebars";import{basename}from"path";import{SourceMapConsumer,SourceNode}from"source-map";function loadStrings(e,n){let t=arrayCast(e.string),a=arrayCast(e.name);if(a.length!==t.length&&t.length>1)return n(new Handlebars.Exception("Number of names did not match the number of string inputs"));Async.map(t,(function(e,n){if("-"!==e)n(void 0,e);else{let e="";process.stdin.setEncoding("utf8"),process.stdin.on("data",(function(n){e+=n})),process.stdin.on("end",(function(){n(void 0,e)}))}}),(function(e,t){t=t.map(((e,n)=>({name:a[n],path:a[n],source:e}))),n(e,t)}))}function loadFiles(e,n){let t=(e.extension||"handlebars").replace(/[\\^$*+?.():=!|{}\-[\]]/g,(function(e){return"\\"+e}));t=new RegExp("\\."+t+"$");let a=[],o=(e.files||[]).map((n=>({template:n,root:e.root})));Async.whilst((()=>o.length),(function(n){let{template:r,root:i}=o.shift();fs.stat(r,(function(s,l){if(s)return n(new Handlebars.Exception(`Unable to open template file "${r}"`));l.isDirectory()?(e.hasDirectory=!0,fs.readdir(r,(function(e,a){if(e)return n(e);a.forEach((function(e){let n=r+"/"+e;(t.test(n)||fs.statSync(n).isDirectory())&&o.push({template:n,root:i||r})})),n()}))):fs.readFile(r,"utf8",(function(o,s){if(o)return n(o);e.bom&&0===s.indexOf("\ufeff")&&(s=s.substring(1));let l=r;i?0===l.indexOf(i)&&(l=l.substring(i.length+1)):l=basename(l),l=l.replace(t,""),a.push({path:r,name:l,source:s}),n()}))}))}),(function(e){e?n(e):n(void 0,a)}))}function arrayCast(e){return e=null!=e?e:[],Array.isArray(e)||(e=[e]),e}function minify(e,n){try{require.resolve("uglify-js")}catch(n){if("MODULE_NOT_FOUND"!==n.code)throw n;return console.error("Code minimization is disabled due to missing uglify-js dependency"),e}return require("uglify-js").minify(e.code,{sourceMap:{content:e.map,url:n}})}module.exports.loadTemplates=function(e,n){loadStrings(e,(function(t,a){t?n(t):loadFiles(e,(function(t,o){t?n(t):(e.templates=a.concat(o),n(void 0,e))}))}))},module.exports.cli=function(e){if(e.version)return void console.log(Handlebars.VERSION);if(!e.templates.length&&!e.hasDirectory)throw new Handlebars.Exception("Must define at least one template or directory.");if(e.simple&&e.min)throw new Handlebars.Exception("Unable to minimize simple output");const n=1!==e.templates.length||e.hasDirectory;if(e.simple&&n)throw new Handlebars.Exception("Unable to output multiple templates in simple mode");e.amd||e.commonjs||1!==e.templates.length||e.templates[0].name||(e.simple=!0);let t={};if(e.known&&!Array.isArray(e.known)&&(e.known=[e.known]),e.known)for(let n=0,a=e.known.length;n<a;n++)t[e.known[n]]=!0;const a=e.partial?"Handlebars.partials":"templates";let o=new SourceNode;e.simple||(e.amd?o.add("define(['"+e.handlebarPath+'handlebars.runtime\'], function(Handlebars) {\n  Handlebars = Handlebars["default"];'):e.commonjs?o.add('var Handlebars = require("'+e.commonjs+'");'):o.add("(function() {\n"),o.add("  var template = Handlebars.template, templates = "),e.namespace&&(o.add(e.namespace),o.add(" = "),o.add(e.namespace),o.add(" || ")),o.add("{};\n")),e.templates.forEach((function(r){let i={knownHelpers:t,knownHelpersOnly:e.o};e.map&&(i.srcName=r.path),e.data&&(i.data=!0);let s=Handlebars.precompile(r.source,i);if(e.map){let e=new SourceMapConsumer(s.map);s=SourceNode.fromStringWithSourceMap(s.code,e)}if(e.simple)o.add([s,"\n"]);else{if(!r.name)throw new Handlebars.Exception("Name missing for template");e.amd&&!n&&o.add("return "),o.add([a,"['",r.name,"'] = template(",s,");\n"])}})),e.simple||(e.amd?(n&&o.add(["return ",a,";\n"]),o.add("});")):e.commonjs||o.add("})();")),e.map&&o.add("\n//# sourceMappingURL="+e.map+"\n"),o=o.toStringWithSourceMap(),o.map=o.map+"",e.min&&(o=minify(o,e.map)),e.map&&fs.writeFileSync(e.map,o.map,"utf8"),o=o.code,e.output?fs.writeFileSync(e.output,o,"utf8"):console.log(o)};
//# sourceMappingURL=/sm/bb0fdc80a4671b5bb7d7c48be5594cb2304de9a63843a10c0941ca53710d6e7b.map